{
    "components": {
        "schemas": {
            "UnitCounterpartyResponse": {
                "type": "object",
                "title": "Unit Counterparty Response",
                "description": "The target counterparty resource after the operation was completed.",
                "properties": {
                    "data": {
                        "$ref": "./counterparty.json#/components/schemas/Counterparty"
                    }
                }
            },
            "UnitCounterpartyBalanceResponse": {
                "type": "object",
                "title": "Unit Counterparty Balance Response",
                "description": "Counterparty Balance resource.",
                "properties": {
                    "data": {
                        "$ref": "./counterpartyBalance.json#/components/schemas/CounterpartyBalance"
                    }
                }
            },
            "UnitCounterpartiesListResponse": {
                "type": "object",
                "title": "Unit Counterparties List Response",
                "description": "Array of counterparty resources.",
                "properties": {
                    "data": {
                        "type": "array",
                        "items": {
                            "$ref": "./counterparty.json#/components/schemas/Counterparty"
                        }
                    },
                    "meta": {
                        "type": "object",
                        "properties": {
                            "pagination": {
                                "type": "object",
                                "properties": {
                                    "total": {
                                        "type": "integer"
                                    },
                                    "limit": {
                                        "type": "integer"
                                    },
                                    "offset": {
                                        "type": "integer"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "counterparties": {
        "get": {
            "tags": ["unit"],
            "operationId": "getCounterpartiesList",
            "summary": "List Counterparties",
            "description": "List counterparties. Filtering and paging can be applied.",
            "parameters": [
                {
                    "$ref": "../types.json#/components/schemas/PageQuery"
                },
                {
                    "name": "filter",
                    "in": "query",
                    "style": "deepObject",
                    "allowReserved": true,
                    "schema": {
                        "type": "object",
                        "properties": {
                            "customerId": {
                                "type": "string",
                                "description": "Optional. Filters the results by the specified customer id."
                            },
                            "accountNumber": {
                                "type": "string",
                                "description": "Optional. Filters the results by the specified account number."
                            },
                            "routingNumber": {
                                "type": "string",
                                "description": "Optional. Filters the results by the specified routing number."
                            },
                            "permissions": {
                                "type": "array",
                                "description": "Optional. Filters the results by the specified counterparty permissions either CreditOnly, DebitOnly, CreditAndDebit.",
                                "items": {
                                    "type": "string",
                                    "enum": [
                                        "CreditOnly",
                                        "DebitOnly",
                                        "CreditAndDebit"
                                    ]
                                }
                            },
                            "tags": {
                                "type": "object",
                                "description": "Optional. Filter Counterparties by Tags.",
                                "additionalProperties": {
                                    "type": "string"
                                }
                            }
                        }
                    }
                },
                {
                    "name": "sort",
                    "in": "query",
                    "description": "Optional. sort=createdAt for ascending order or sort=-createdAt (leading minus sign) for descending order.",
                    "schema": {
                        "type": "string"
                    }
                }
            ],
            "responses": {
                "200": {
                    "description": "Successful Response",
                    "content": {
                        "application/vnd.api+json; charset=utf-8": {
                            "schema": {
                                "$ref": "#/components/schemas/UnitCounterpartiesListResponse"
                            }
                        }
                    }
                }
            }
        },
        "post": {
            "tags": ["unit"],
            "operationId": "createCounterparty",
            "summary": "Create Counterparty",
            "description": "Creates an ACH counterparty for a specific customer.",
            "requestBody": {
                "description": "Create Counterparty Request",
                "required": true,
                "content": {
                    "application/vnd.api+json": {
                        "schema": {
                            "$ref": "./createCounterparty.json#/components/schemas/CreateCounterpartyRequest"
                        }
                    }
                }
            },
            "responses": {
                "201": {
                    "description": "Successful Response",
                    "content": {
                        "application/vnd.api+json": {
                            "schema": {
                                "$ref": "#/components/schemas/UnitCounterpartyResponse"
                            }
                        }
                    }
                }
            }
        }
    },
    "counterparty": {
        "get": {
            "tags": ["unit"],
            "operationId": "getCounterparty",
            "parameters": [
                {
                    "schema": {
                        "type": "string"
                    },
                    "name": "counterpartyId",
                    "in": "path",
                    "required": true,
                    "description": "ID of the counterparty to get"
                }
            ],
            "summary": "Get Counterparty by Id",
            "description": "Get a counterparty resource by id.",
            "responses": {
                "200": {
                    "description": "Successful Response",
                    "content": {
                        "application/vnd.api+json; charset=utf-8": {
                            "schema": {
                                "$ref": "#/components/schemas/UnitCounterpartyResponse"
                            }
                        }
                    }
                }
            }
        },
        "patch": {
            "tags": ["unit"],
            "operationId": "updateCounterparty",
            "summary": "Update Counterparty",
            "description": "Update a Counterparty. Relink existing counterparty with a new Plaid processor token.",
            "parameters": [
                {
                    "schema": {
                        "type": "string"
                    },
                    "name": "counterpartyId",
                    "in": "path",
                    "required": true,
                    "description": "ID of the counterparty to update"
                }
            ],
            "requestBody": {
                "description": "Update Counterparty Request",
                "required": true,
                "content": {
                    "application/vnd.api+json": {
                        "schema": {
                            "$ref": "./updateCounterparty.json#/components/schemas/UpdateCounterpartyRequest"
                        }
                    }
                }
            },
            "responses": {
                "200": {
                    "description": "Successful Response",
                    "content": {
                        "application/vnd.api+json": {
                            "schema": {
                                "$ref": "#/components/schemas/UnitCounterpartyResponse"
                            }
                        }
                    }
                }
            }
        },
        "delete": {
            "tags": ["unit"],
            "operationId": "deleteCounterparty",
            "parameters": [
                {
                    "schema": {
                        "type": "string"
                    },
                    "name": "counterpartyId",
                    "in": "path",
                    "required": true,
                    "description": "ID of the counterparty to delete"
                }
            ],
            "summary": "Delete Counterparty by Id",
            "description": "Delete a counterparty resource by id.",
            "responses": {
                "204": {
                    "description": "No content. The operation was completed successfully."
                }
            }
        }
    },
    "counterpartyBalance": {
        "get": {
            "tags": ["unit"],
            "operationId": "getCounterpartyBalance",
            "summary": "Get Counterparty Balance By Id",
            "parameters": [
                {
                    "schema": {
                        "type": "string"
                    },
                    "name": "counterpartyId",
                    "in": "path",
                    "required": true,
                    "description": "ID of the counterparty to get the balance for"
                }
            ],
            "description": "Get a counterparty balance by id. Counterparty must be created with Plaid Processor token in order to run this request. The external account balance will only be returned if customer is the owner of the counterparty account.",
            "responses": {
                "200": {
                    "description": "Successful Response",
                    "content": {
                        "application/vnd.api+json; charset=utf-8": {
                            "schema": {
                                "$ref": "#/components/schemas/UnitCounterpartyBalanceResponse"
                            }
                        }
                    }
                }
            }
        }
    }
}
