{
    "components": {
        "schemas": {
            "PaymentCounterparty": {
                "title": "Payment Counterparty",
                "type": "object",
                "properties": {
                    "routingNumber": {
                        "type": "string",
                        "pattern": "^\\d{9}$",
                        "description": "The routing number of the counterparty's financial institution."
                    },
                    "accountNumber": {
                        "type": "string",
                        "pattern": "^\\d{1,17}$",
                        "description": "The account number of the counterparty."
                    },
                    "accountType": {
                        "type": "string",
                        "enum": ["Checking", "Savings", "Loan"],
                        "description": "The type of account for the counterparty."
                    },
                    "name": {
                        "type": "string",
                        "minLength": 1,
                        "maxLength": 50,
                        "description": "The name of the counterparty."
                    }
                },
                "additionalProperties": false,
                "required": [
                    "routingNumber",
                    "accountNumber",
                    "accountType",
                    "name"
                ]
            },
            "WirePaymentCounterparty": {
                "title": "WireCounterparty",
                "type": "object",
                "properties": {
                    "routingNumber": {
                        "type": "string",
                        "pattern": "^\\d{9}$",
                        "description": "Valid 9-digit ABA routing transit number."
                    },
                    "accountNumber": {
                        "type": "string",
                        "maxLength": 17,
                        "description": "Bank account number."
                    },
                    "name": {
                        "type": "string",
                        "minLength": 1,
                        "maxLength": 50,
                        "description": "The account holder's name (whether an individual or a business, maximum of 50 characters)."
                    },
                    "address": {
                        "allOf": [
                            { "$ref": "../types.json#/components/schemas/Address" },
                            { "description": "The address of the counterparty." }
                        ]
                    }
                },
                "additionalProperties": false,
                "required": [
                    "routingNumber",
                    "accountNumber",
                    "address",
                    "name"
                ]
            },
            "Astra": {
                "title": "AstraPushToCardConfiguration",
                "type": "object",
                "properties": {
                    "authToken": {
                        "type": "string",
                        "minLength": 1
                    },
                    "debitFeePercent": {
                        "type": "number"
                    },
                    "institutionId": {
                        "type": "string",
                        "minLength": 1
                    },
                    "destinationCardId": {
                        "type": "string",
                        "minLength": 1
                    },
                    "routingNumber": {
                        "type": "string",
                        "minLength": 1
                    },
                    "accountNumber": {
                        "type": "string",
                        "minLength": 1
                    },
                    "accountName": {
                        "type": "string",
                        "minLength": 1
                    },
                    "referenceId": {
                        "type": "string",
                        "minLength": 1,
                        "maxLength": 80
                    }
                },
                "additionalProperties": false,
                "required": [
                    "debitFeePercent",
                    "institutionId",
                    "destinationCardId",
                    "routingNumber",
                    "accountNumber",
                    "referenceId"
                ]
            },
            "AchPaymentRelationships": {
                "allOf": [
                    {
                        "type": "object",
                        "required": ["account", "counterparty", "transaction"],
                        "additionalProperties": true
                    },
                    {
                        "$ref": "../relationships.json#/components/schemas/AccountRelationship"
                    },
                    {
                        "$ref": "../relationships.json#/components/schemas/CustomerRelationship"
                    },
                    {
                        "$ref": "../relationships.json#/components/schemas/CustomersRelationship"
                    },
                    {
                        "$ref": "../relationships.json#/components/schemas/CounterpartyRelationship"
                    },
                    {
                        "$ref": "../relationships.json#/components/schemas/TransactionRelationship"
                    },
                    {
                        "$ref": "../relationships.json#/components/schemas/RecurringPaymentRelationship"
                    }
                ]
            },
            "WirePaymentRelationships": {
                "allOf": [
                    {
                        "type": "object",
                        "required": ["account", "transaction"],
                        "additionalProperties": true
                    },
                    {
                        "$ref": "../relationships.json#/components/schemas/AccountRelationship"
                    },
                    {
                        "$ref": "../relationships.json#/components/schemas/CustomerRelationship"
                    },
                    {
                        "$ref": "../relationships.json#/components/schemas/CustomersRelationship"
                    },
                    {
                        "$ref": "../relationships.json#/components/schemas/TransactionRelationship"
                    }
                ]
            },
            "BookPaymentRelationships": {
                "allOf": [
                    {
                        "type": "object",
                        "required": [
                            "account",
                            "counterpartyAccount",
                            "counterpartyCustomer",
                            "transaction"
                        ],
                        "additionalProperties": true
                    },
                    {
                        "$ref": "../relationships.json#/components/schemas/AccountRelationship"
                    },
                    {
                        "$ref": "../relationships.json#/components/schemas/CustomerRelationship"
                    },
                    {
                        "$ref": "../relationships.json#/components/schemas/CustomersRelationship"
                    },
                    {
                        "$ref": "../relationships.json#/components/schemas/CounterpartyAccountRelationship"
                    },
                    {
                        "$ref": "../relationships.json#/components/schemas/CounterpartyCustomerRelationship"
                    },
                    {
                        "$ref": "../relationships.json#/components/schemas/TransactionRelationship"
                    },
                    {
                        "$ref": "../relationships.json#/components/schemas/RecurringPaymentRelationship"
                    }
                ]
            },
            "PushToCardPaymentRelationships": {
                "allOf": [
                    {
                        "type": "object",
                        "required": ["account", "transaction", "achPayment"],
                        "additionalProperties": true
                    },
                    {
                        "$ref": "../relationships.json#/components/schemas/AccountRelationship"
                    },
                    {
                        "$ref": "../relationships.json#/components/schemas/CustomerRelationship"
                    },
                    {
                        "$ref": "../relationships.json#/components/schemas/CustomersRelationship"
                    },
                    {
                        "$ref": "../relationships.json#/components/schemas/TransactionRelationship"
                    },
                    {
                        "$ref": "../relationships.json#/components/schemas/AchPaymentRelationship"
                    }
                ]
            },
            "AchPayment": {
                "title": "ACH Payment",
                "type": "object",
                "allOf": [
                    {
                        "$ref": "./payment.json#/components/schemas/Payment"
                    },
                    {
                        "type": "object",
                        "properties": {
                            "attributes": {
                                "type": "object",
                                "properties": {
                                    "createdAt": {
                                        "type": "string",
                                        "format": "date-time"
                                    },
                                    "amount": {
                                        "type": "integer",
                                        "minimum": 1,
                                        "format": "int64"
                                    },
                                    "direction": {
                                        "type": "string",
                                        "enum": ["Credit", "Debit"],
                                        "description": "The direction in which the funds flow. In the context of ACH payment origination, 'Debit': the payment 'pulls' funds from the counterparty account. 'Credit': the payment 'pushes' funds to the counterparty account."
                                    },
                                    "description": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 50,
                                        "description": "Payment description (maximum of 10 characters), also known as Company Entry Description, this will show up on statement of the counterparty."
                                    },
                                    "addenda": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 80,
                                        "description": "Optional, additional payment description (maximum of 80 characters), not all institutions present that."
                                    },
                                    "counterparty": {
                                        "$ref": "#/components/schemas/PaymentCounterparty",
                                        "description": "The party on the other side of the ACH payment."
                                    },
                                    "tags": {
                                        "$ref": "../types.json#/components/schemas/Tags"
                                    },
                                    "status": {
                                        "type": "string",
                                        "enum": [
                                            "Pending",
                                            "Rejected",
                                            "Clearing",
                                            "Sent",
                                            "Canceled",
                                            "PendingReview",
                                            "Returned"
                                        ],
                                        "description": "Payment status. Possible values include: 'Rejected': Based on validity and risk checks, Unit has decided to reject the payment and not process it. 'Pending': Waiting to be processed or transmitted to the payment network. 'Canceled': The payment was canceled by the client / end-customer before being sent to the network. 'PendingReview': The payment is waiting to be manually reviewed, typically due to a high level of risk associated with that payment. 'Clearing': In certain types of payments, once the funds are received by Unit, we hold on to them for a period, on your behalf, before releasing them to the end customer. 'Sent': The payment has been fully processed. 'Returned': The payment was processed but the network or the receiving bank returned the payment."
                                    },
                                    "settlementDate": {
                                        "type": "string",
                                        "format": "date"
                                    },
                                    "reason": {
                                        "type": "string"
                                    },
                                    "expectedCompletionDate": {
                                        "type": "string",
                                        "format": "date"
                                    },
                                    "secCode": {
                                        "type": "string",
                                        "description": "Standard Entry Class (SEC) code used in all ACH payments to identify certain types of ACH payments."
                                    },
                                    "traceNumber": {
                                        "type": "string"
                                    },
                                    "sameDay": {
                                        "type": "boolean",
                                        "description": "Same-day ACH enables your clients to send and receive funds using ACH the same day the payment is created."
                                    },
                                    "counterpartyVerificationMethod": {
                                        "type": "string"
                                    },
                                    "clearingDaysOverride": {
                                        "type": "integer",
                                        "description": "The amount of days it will take an Originated ACH debit to clear and funds to become available in a deposit account."
                                    }
                                },
                                "required": [
                                    "createdAt",
                                    "status",
                                    "description",
                                    "amount",
                                    "direction"
                                ]
                            },
                            "relationships": {
                                "$ref": "#/components/schemas/AchPaymentRelationships"
                            }
                        },
                        "additionalProperties": false,
                        "required": [
                            "type",
                            "id",
                            "attributes",
                            "relationships"
                        ]
                    }
                ]
            },
            "BookPayment": {
                "title": "Book Payment",
                "type": "object",
                "allOf": [
                    {
                        "$ref": "./payment.json#/components/schemas/Payment"
                    },
                    {
                        "description": "Book payments are free and instant fund transfers between two accounts under your organization. Book payments from wallets to deposit accounts are available, but book payments from deposit accounts to wallet accounts are not permitted at this time.",
                        "type": "object",
                        "properties": {
                            "attributes": {
                                "type": "object",
                                "properties": {
                                    "createdAt": {
                                        "type": "string",
                                        "format": "date-time"
                                    },
                                    "amount": {
                                        "type": "integer",
                                        "minimum": 1,
                                        "format": "int64",
                                        "description": "The amount (in cents)."
                                    },
                                    "direction": {
                                        "type": "string",
                                        "enum": ["Credit"],
                                        "description": "The direction of book payment is always 'Credit', moving funds from 'account' to 'counterpartyAccount'."
                                    },
                                    "description": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 80,
                                        "description": "Payment description (maximum of 80 characters), this will show up on statement of the counterparty."
                                    },
                                    "status": {
                                        "type": "string",
                                        "enum": [
                                            "Pending",
                                            "Rejected",
                                            "Clearing",
                                            "Sent",
                                            "Canceled",
                                            "PendingReview",
                                            "Returned"
                                        ],
                                        "description": "Payment status. Possible values include: 'Rejected': Based on validity and risk checks, Unit has decided to reject the payment and not process it. 'Pending': Waiting to be processed or transmitted to the payment network. 'Canceled': The payment was canceled by the client / end-customer before being sent to the network. 'PendingReview': The payment is waiting to be manually reviewed, typically due to a high level of risk associated with that payment. 'Clearing': In certain types of payments, once the funds are received by Unit, we hold on to them for a period, on your behalf, before releasing them to the end customer. 'Sent': The payment has been fully processed. 'Returned': The payment was processed but the network or the receiving bank returned the payment."
                                    },
                                    "transactionSummaryOverride": {
                                        "type": "string",
                                        "maxLength": 100,
                                        "description": "Optional. If this field is populated, its contents will be returned as the bookTransaction's summary field (maximum of 100 characters)."
                                    },
                                    "reason": {
                                        "type": "string",
                                        "description": "In case of rejection, this field will contain the reason why the payment was rejected. Possible rejection reasons: 'InsufficientFunds': The available balance isn't enough to cover the value of the payment. 'AccountClosed': The counterparty account has been closed. 'AccountFrozen': The counterparty account is frozen."
                                    },
                                    "tags": {
                                        "$ref": "../types.json#/components/schemas/Tags",
                                        "description": "Optional. See https://www.unit.co/docs/api/#tags."
                                    }
                                },
                                "required": [
                                    "createdAt",
                                    "amount",
                                    "direction",
                                    "description",
                                    "status"
                                ],
                                "additionalProperties": false
                            },
                            "relationships": {
                                "$ref": "#/components/schemas/BookPaymentRelationships"
                            }
                        },
                        "additionalProperties": false,
                        "required": [
                            "type",
                            "id",
                            "attributes",
                            "relationships"
                        ]
                    }
                ]
            },
            "WirePayment": {
                "title": "Wire Payment",
                "type": "object",
                "allOf": [
                    {
                        "$ref": "./payment.json#/components/schemas/Payment"
                    },
                    {
                        "type": "object",
                        "properties": {
                            "attributes": {
                                "type": "object",
                                "properties": {
                                    "createdAt": {
                                        "type": "string",
                                        "format": "date-time"
                                    },
                                    "amount": {
                                        "type": "integer",
                                        "minimum": 1,
                                        "format": "int64",
                                        "description": "The amount (in cents)."
                                    },
                                    "direction": {
                                        "type": "string",
                                        "enum": ["Credit"],
                                        "description": "The direction of wire payment is always 'Credit', moving funds from the Unit 'account' to the 'counterparty' account."
                                    },
                                    "description": {
                                        "type": "string",
                                        "minLength": 1,
                                        "maxLength": 50,
                                        "description": "Payment description (maximum of 50 characters), this will show up on statement of the counterparty."
                                    },
                                    "counterparty": {
                                        "allOf": [
                                            { "$ref": "./payment.json#/components/schemas/WirePaymentCounterparty" },
                                            { "description": "The party on the other side of the Wire payment." }
                                        ]
                                    },
                                    "status": {
                                        "type": "string",
                                        "enum": [
                                            "Pending",
                                            "Rejected",
                                            "Clearing",
                                            "Sent",
                                            "Canceled",
                                            "PendingReview",
                                            "Returned"
                                        ],
                                        "description": "Payment status. Possible values include: 'Rejected': Based on validity and risk checks, Unit has decided to reject the payment and not process it. 'Pending': Waiting to be processed or transmitted to the payment network. 'Canceled': The payment was canceled by the client / end-customer before being sent to the network. 'PendingReview': The payment is waiting to be manually reviewed, typically due to a high level of risk associated with that payment. 'Clearing': In certain types of payments, once the funds are received by Unit, we hold on to them for a period, on your behalf, before releasing them to the end customer. 'Sent': The payment has been fully processed. 'Returned': The payment was processed but the network or the receiving bank returned the payment."
                                    },
                                    "settlementDate": {
                                        "type": "string",
                                        "format": "date"
                                    },
                                    "reason": {
                                        "type": "string",
                                        "description": "In case of rejection, this field will contain the reason why the payment was rejected. Possible rejection reasons: 'AccountFrozen': The counterparty account is frozen. 'SuspectedFraud': The payment is suspected to be fraudulent. 'InsufficientFunds': The available balance isn't enough to cover the value of the wire. 'Invalid Routing Number': The counterparty routing number is not valid. 'Wire Rejected': The counterparty rejected the wire payment. 'AccountClosed': The counterparty account has been closed. 'ClientRequest': The client has requested the wire payment to be rejected."
                                    },
                                    "imadOmad": {
                                        "type": "object",
                                        "properties": {
                                            "imad": {
                                                "type": "string"
                                            },
                                            "omad": {
                                                "type": "string"
                                            }
                                        }
                                    },
                                    "tags": {
                                        "allOf": [
                                            { "$ref": "../types.json#/components/schemas/Tags" },
                                            { "description": "Optional. See Tags. Tags that will be copied to any transaction that this payment creates (see Tag Inheritance)." }
                                        ]
                                    }
                                },
                                "required": [
                                    "createdAt",
                                    "amount",
                                    "direction",
                                    "description",
                                    "status"
                                ],
                                "additionalProperties": false
                            },
                            "relationships": {
                                "$ref": "#/components/schemas/WirePaymentRelationships"
                            }
                        },
                        "additionalProperties": false,
                        "required": [
                            "type",
                            "id",
                            "attributes",
                            "relationships"
                        ]
                    }
                ]
            },

            "PushToCardPayment": {
                "title": "Push To Card Payment Response",
                "type": "object",
                "allOf": [
                    {
                        "$ref": "./payment.json#/components/schemas/Payment"
                    },
                    {
                        "type": "object",
                        "properties": {
                            "attributes": {
                                "type": "object",
                                "properties": {
                                    "createdAt": {
                                        "type": "string",
                                        "format": "date-time"
                                    },
                                    "amount": {
                                        "type": "integer",
                                        "minimum": 1,
                                        "format": "int64"
                                    },
                                    "direction": {
                                        "type": "string",
                                        "enum": ["Debit", "Credit"]
                                    },
                                    "description": {
                                        "type": "string",
                                        "minLength": 1
                                    },
                                    "status": {
                                        "type": "string",
                                        "enum": ["Pending", "Rejected", "Sent"]
                                    },
                                    "reason": {
                                        "type": "string"
                                    },
                                    "tags": {
                                        "$ref": "../types.json#/components/schemas/Tags"
                                    },
                                    "astraRoutineId": {
                                        "type": "string"
                                    }
                                },
                                "required": [
                                    "createdAt",
                                    "amount",
                                    "direction",
                                    "description",
                                    "status"
                                ],
                                "additionalProperties": false
                            },
                            "relationships": {
                                "$ref": "#/components/schemas/PushToCardPaymentRelationships"
                            }
                        },
                        "additionalProperties": false,
                        "required": [
                            "type",
                            "id",
                            "attributes",
                            "relationships"
                        ]
                    }
                ]
            },
            "Payment": {
                "title": "Payment Resource",
                "description": "Payments in Unit represent requests to move funds that are initiated by the end customer. Payments are not final, and do not necessarily materialize into an actual movement of funds - they have a lifecycle that depends on the payment type. Book payments are free and instant fund transfers between two accounts under your organization, typically used for moving funds between two accounts that belong to the same or different end-customers, moving funds from clearing accounts to end-customer accounts, or moving funds from your organization's operational account to an end-customer account.",
                "type": "object",
                "properties": {
                    "type": {
                        "type": "string",
                        "enum": ["achPayment", "bookPayment", "wirePayment"]
                    },
                    "id": {
                        "$ref": "../types.json#/components/schemas/Identifier"
                    }
                },
                "discriminator": {
                    "propertyName": "type",
                    "mapping": {
                        "achPayment": "#/components/schemas/AchPayment",
                        "bookPayment": "#/components/schemas/BookPayment",
                        "wirePayment": "#/components/schemas/WirePayment"
                    }
                },
                "additionalProperties": false
            }
        }
    }
}
